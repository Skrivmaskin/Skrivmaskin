// This file has been autogenerated from a class added in the UI designer.

using System;

using Foundation;
using AppKit;
using CoreGraphics;

namespace TextOn.Studio
{
	public partial class DefineNounsViewController : NSViewController
	{
		public DefineNounsViewController (IntPtr handle) : base (handle)
		{
		}

//        DefineNounsCollectionViewDataSource datasource;

        public override void ViewDidLoad ()
        {
            base.ViewDidLoad ();

//            this.datasource = new DefineNounsCollectionViewDataSource ();
//            CollectionView.DataSource = this.datasource;
//            CollectionView.Delegate = new DefineNounsCollectionViewDelegateFlowLayout ();
//            CollectionView.WantsLayer = true;
//            CollectionView.Layer.BackgroundColor = new CGColor (0.9f, 0.9f, 0.9f);
        }

        private NSMutableArray nouns = new NSMutableArray ();
        public NSArray nounModelArray {
            [Export (nameof(nounModelArray))]
            get { return nouns; }
        }
        private CentralViewController centralViewController = null;
        internal void SetControllerLinks (CentralViewController cvc)
        {
            Console.Error.WriteLine ("DefineNouns SetControllerLinks");
            centralViewController = cvc;
            TemplateUpdated ();
        }

        internal void TemplateUpdated ()
        {
//            var nounProfile = centralViewController.Template.Nouns;
//            var allNouns = nounProfile.GetAllNouns ();
//            var array = new NSMutableArray ();
//            foreach (var item in allNouns) {
//                array.Add (new NounModel (item.Name, item.Description));
//            }
//            SetNouns (array);
//            this.datasource = new DefineNounsCollectionViewDataSource ();
//            datasource.Nouns = centralViewController.Template.Nouns;
//            CollectionView.DataSource = this.datasource;
//            CollectionView.Delegate = new DefineNounsCollectionViewDelegateFlowLayout ();
//            CollectionView.WantsLayer = true;
//            DCollectionView.Layer.BackgroundColor = new CGColor (0.9f, 0.9f, 0.9f);
        }

        public void AddNewNoun (string nounName, string description, bool acceptsUserValue)
        {
            centralViewController.Template.Nouns.AddNewNoun (nounName, description, acceptsUserValue);
        }
	}
}
